


CP(1)          Human68k ITA TOOLBOX User's Manual           CP(1)



名称
     cp - ファイルやディレクトリをコピーする

形式
     cp [ -IRSVadefinprsuvx ] [ -m mode ] [ -- ] source dest

     cp [ -CDILPRSUVadefinprsuvx ] [ -m mode ] [ -- ] source ...
     targetdir

解説
     cp はファイルやディレクトリをコピーします．ファイルからデバ
     イス，デバイスからファイル，およびデバイスからデバイスへのデー
     タ転送も行うことができます．

     第1の形式では source を dest にコピーします．デバイスは，こ
     の形式でのみ指定可能です．第2の形式では source ... をそれぞ
     れ元のファイル名のままディレクトリ targetdir の中にコピーし
     ます．source ... は左から右に順番に処理され，-e オプションが
     指定されていなければ，もし途中でエラーがあっても処理は最後ま
     で続行されます．この 2つの形式は最後の引数がディレクトリ（ま
     たはディレクトリへのシンボリック・リンク）であるかどうかで区
     別されます．

     ‘A:’のようなドライブ名のみの指定は，そのドライブのカレント・
     ディレクトリを意味します．

     ディレクトリをコピーするには，-r オプションかまたは -R オプ
     ションを指定してください．このオプションは，source がディレ
     クトリである場合，そのディレクトリはもちろん，それ以下のすべ
     てのファイルやディレクトリを再帰的にコピーします．

     コピー先の属性は次にように設定されます．

     ・新規ファイル
     ・新規ディレクトリ

          source から属性もコピーされます．source に属性が無い場
          合は，読み書き可，実行不可となります．いずれの場合も -m
          オプションによって変更されます．

     ・既存ファイル

          属性は通常は元のまま保存されますが，-p オプションを指定
          すると，もし source に属性があれば source から属性もコ
          ピーされます．いずれの場合も -m オプションによって変更
          されます．

     ・既存ディレクトリ

          属性は元のまま保存されます．-p オプションや -m オプショ
          ンは無効です．

     コピー先のタイムスタンプは次にように設定されます．

     ・新規ファイル
     ・既存ファイル
     ・新規ディレクトリ

          タイムスタンプは通常は更新されますが，-p オプションを指
          定すると，もし source にタイムスタンプがあれば source
          からタイムスタンプもコピーされます．

     ・既存ディレクトリ

          タイムスタンプは元のまま保存されます．-p オプションは無
          効です．

     cp は沖版 lndrv によるシンボリック・リンク（以下では単に『シ
     ンボリック・リンク』と記します）をサポートしています．-d オ
     プションが指定されていなければ，シンボリック・リンクに対する
     アクセスは，リンクが参照する実体へのアクセスとなります．その
     場合，lndrv がシステムに組み込まれていなければなりません．

     コピー元とコピー先が同一のエントリである場合はエラーとなりま
     す．

     cp には 次のオプションがあります．

     -C        ファイルやディレクトリを元の名前のままコピーする場
               合において，コピー先の名前をMS-DOSのディレクトリに
               納まるよう切り詰めます．ただし . を 2個以上含む名
               前や . で始まる名前のファイルやディレクトリはコピー
               しません．

     -D        ファイルやディレクトリを元の名前のままコピーする場
               合において，MS-DOSのディレクトリに納まらない名前の
               ファイルやディレクトリをコピーしません．このオプショ
               ンは -C オプションを覆います．

     -I        ファイルやディレクトリ毎に問い合わせを行います．問
               い合わせに対して‘y’で始まる行を入力すると通常ど
               おり処理され，それ以外の入力ではコピーをとりやめて
               次のファイルやディレクトリの処理に進みます．このオ
               プションは -i オプションを覆いますが，コピー先に既
               にファイルがある場合には -i オプションと同じ処理が
               行われます．

     -L        ファイルやディレクトリを元の名前のままコピーする場
               合において，小文字を含む名前のファイルやディレクト
               リをコピーしません．

     -P        たとえば cp -P a/b/c /d/e/f G:/h/i/j dir では，
               a/b/c を dir/a/b/c に，/d/e/f を dir/d/e/f に，
               G:/h/i/j を dir/h/i/j にコピーします．dir は存在す
               るディレクトリでなければなりません（このオプション
               は第2の形式でのみサポートされます）．パス dir/a/b，
               dir/d/e，dir/h/i は，存在しなければ作成されます（た
               だしコピーするファイルが存在していなければ，パスの
               作成は行われません）．このパスの作成処理は，どのオ
               プションの影響も受けません．

     -R, -r    ディレクトリを再帰的にコピーします．

     -S        システム・ファイルをコピーしません．

     -U        ファイルやディレクトリを元の名前のままコピーする場
               合に，コピー先の名前を大文字にします．

     -V        ボリューム・ラベルもコピーします．

     -a        -dpR と同じです．

     -d        シンボリック・リンクが参照する実体にアクセスする代
               わりにリンク・ファイルそのものにアクセスします．シ
               ンボリック・リンクは，そのままシンボリック・リンク
               としてコピーされることになります．また，コピー先に
               シンボリック・リンクが存在している場合は，そのリン
               ク・ファイルが上書きの対象となります．通常これは結
               果的にはエラーとなりますが，-f オプションを指定す
               れば，コピー先のリンク・ファイルが予め削除され，そ
               れに代わってコピーが新規作成されることになります．

                    このオプションは，cp の 2つの形式の判別（最後
               の引数がディレクトリであるかどうかの判定）には影響
               しません．

     -e        何らかのエラーが起こったとき，処理を続行せずに即終
               了します．

     -f        コピー先に同名のファイルが存在していれば，それを予
               め強制的に削除してコピー先を新規に作成します．また，
               ボリューム・ラベルのコピー先のディレクトリ内にボ
               リューム・ラベルが存在していれば，それも予め強制的
               に削除します．

               削除は -u オプションや -i オプションの処理後に行わ
               れます．

     -i        コピー先に同名のファイルが存在している場合，上書き
               するかどうかを -I オプションと同様に問い合わせます．

                    問い合わせに対して‘y’で始まる行を入力しても，
               上書きが必ず成功するとは限りません．コピー先に存在
               するファイルの属性によっては結果的にエラーとなる場
               合があります．そのような場合も強制的にコピーしたい
               場合には -f オプションを併用してください．この ITA
               TOOLBOX の cp では，-f オプション と -i オプション
               は互いに打ち消し合うものではありません．

     -n        -v オプションと同じ報告を行いますが，実際にコピー
               はしません．このオプションを指定すると，-f オプショ
               ン，-i オプションおよび -I オプションは無効となり
               ます．

     -p        ファイルや新規作成されるディレクトリに対して（もし
               あれば）属性とタイムスタンプもコピーします．-m オ
               プションによる修正はその属性に対して働くことになり
               ます．

     -s        ファイル（ディレクトリは除く）をコピーする代わりに，
               そのファイルを参照するシンボリック・リンクを作成し
               ます．ただし，コピー元が相対パスで示される場合には，
               コピー先は‘.’（カレント・ディレクトリ）でなけれ
               ばなりません．

     -u        ファイル（ディレクトリを除く）をコピーするとき，コ
               ピー先にファイルが存在していて，それがコピーしよう
               とするファイルよりも新しければ，コピーしません．そ
               の場合には問い合わせも行われません．

     -v        ファイルやデバイスをコピーする直前に，そのパス名と
               コピー先を標準出力に出力します．ディレクトリを作成
               したときには，その直後に報告します．

     -x        ディレクトリを再帰的にコピーするとき，コピーを始め
               る最上位のディレクトリと同じドライブにあるファイル
               やディレクトリのみをコピーし，違うドライブにあるファ
               イルやディレクトリはコピーしません．その場合には問
               い合わせも行われません．

     -m mode   コピー先のファイルや新たに作成されるディレクトリに
               本来与えられる属性を mode に従って変更します．

                    この機能は ITA TOOLBOX の chmod(1) に準じます．
               mode の書式は ITA TOOLBOX の chmod(1) と同じです．

     -m オプションを複数指定した場合には，最後の指定のみが有効と
     なります．

関連事項
     ln(1), mv(1), rm(1), mkdir(1), chmod(1)

診断
     何らかのエラーがあったときにはエラー・メッセージが標準エラー
     出力に出力されます．

     終了ステータスとしては，引数の記述に間違いがあった場合には 1，
     各引数の処理中に何らかのエラーが 1度でもあった場合には 2，メ
     モリ不足や OS のバージョンの違いなど，システムの原因により正
     常に実行ができなかった場合には 3，すべてが正常に終了したなら
     ば 0 が返ります．^C などによって中断したときの終了ステータス
     は OS の仕様によります．

注意
     ファイルのコピーに失敗したり，ファイルのコピー中に ^C によっ
     て停止した場合には，コピー先にコピー途中のファイルが残ります．

不具合
     サブディレクトリに別のドライブがjoin（mount）されているとき，
     -x オプションはその別ドライブ内のファイルやディレクトリを無
     視しますが，そのサブディレクトリそのものだけはコピーされます．

     ディレクトリの再帰の回数は64回に制限されています．

バージョン
     2.1

制作・著作
     Copyright(C)1992-93 by 板垣 史彦 (Itagaki Fumihiko)



2.1                 Last change: 24 Nov 1993     Itagaki Fumihiko



